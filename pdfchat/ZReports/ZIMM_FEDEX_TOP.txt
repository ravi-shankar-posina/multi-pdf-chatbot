*&---------------------------------------------------------------------*
*&  Include           ZIMM_FEDEX_TOP
*&---------------------------------------------------------------------*
TYPES : BEGIN OF ty_fedex_inb,
           tracknum        TYPE exidv2,
           custtranid      TYPE zcustranid,
           plant           TYPE werks_d,
           exidv           TYPE exidv,
           counter         TYPE numc5,
           mastertracknum  TYPE exidv2,
           frtcharge       TYPE phk_toamt,
           frtcurr         TYPE waers,
           cdate           TYPE dats,
           sertype         TYPE zfdx_servc_type,
           msglevel        TYPE char7,
           message         TYPE zfedexmsg,
        END OF ty_fedex_inb,

        BEGIN OF ty_vekp,
           venum  TYPE venum,
           exidv  TYPE exidv,
           brgew  TYPE brgew_vekp,
           gewei  TYPE gewei,
           vhilm  TYPE vhilm,
        END OF ty_vekp,

        BEGIN OF ty_vepo,
            vbeln TYPE vbeln_vl,
            posnr TYPE posnr_vl,
            matnr TYPE matnr,
            vemng TYPE vemng,
            vemeh TYPE vemeh,
            werks TYPE werks_d,
            venum TYPE venum,
        END OF ty_vepo,

        BEGIN OF ty_likp,
          vbeln     TYPE vbeln_vl,
          wadat_ist TYPE wadat_ist,
        END OF ty_likp,

        BEGIN OF ty_vbfa,
          vbelv   TYPE vbeln_von,
          posnv   TYPE posnr_von,
          vbeln   TYPE vbeln_nach,
          posnn   TYPE posnr_nach,
          vbtyp_n TYPE vbtyp_n,
        END OF ty_vbfa,

        BEGIN OF ty_vbak,
          vbeln   TYPE vbeln_va,
          knumv   TYPE knumv,
          erdat   TYPE erdat,
          bstnk   TYPE bstnk,
          bstdk   TYPE bstdk,
          kunnr   TYPE kunag,
          netwr   TYPE netwr_ak,
          waerk   TYPE waerk,
        END OF ty_vbak,

        BEGIN OF ty_vbap,
          vbeln   TYPE vbeln_va,
          posnr   TYPE posnr_va,
          arktx   TYPE arktx,
          kwmeng  TYPE kwmeng,
          netwr   TYPE netwr_ap,
          waerk   TYPE waerk,
        END OF ty_vbap,

        BEGIN OF ty_vbpa,
          vbeln  TYPE vbeln,
          posnr  TYPE posnr,
          parvw  TYPE parvw,
          kunnr  TYPE kunnr,
          adrnr  TYPE adrnr,
        END OF ty_vbpa,

        BEGIN OF ty_adrc,
          addrnumber TYPE ad_addrnum,
          name1      TYPE ad_name1,
          name2      TYPE ad_name2,
          street     TYPE ad_street,
          str_suppl1 TYPE ad_strspp1,
          city1      TYPE ad_city1,
          post_code1 TYPE ad_pstcd1,
          region     TYPE regio,
          country    TYPE land1,
        END OF ty_adrc,

        BEGIN OF ty_final,
          tracknum          TYPE exidv2,
          custtranid        TYPE zcustranid,
          plant             TYPE werks_d,
          exidv             TYPE exidv,
          mastertracknum    TYPE exidv2,
          frtcharge         TYPE phk_toamt,
          frtcurr           TYPE waers,
          cdate             TYPE dats,
*          venum             TYPE venum,
          brgew             TYPE brgew_vekp,
          gewei             TYPE gewei,
          vhilm             TYPE vhilm,
          vbeln             TYPE vbeln_vl,
          posnr             TYPE posnr_vl,
          matnr             TYPE matnr,
          vemng             TYPE vemng,
          vemeh             TYPE vemeh,
          werks             TYPE werks_d,
          vbelv             TYPE vbeln_von,
          posnv             TYPE posnr_von,
*          vbeln1            TYPE vbeln_va,
*          knumv             TYPE knumv,
          erdat             TYPE erdat,
          bstnk             TYPE bstnk,
          bstdk             TYPE bstdk,
          kunnr             TYPE kunag,
          netwr             TYPE netwr_ak,
          waerk             TYPE waerk,
          arktx             TYPE arktx,
          kwmeng            TYPE kwmeng,
          netwr1            TYPE netwr_ap,
          waerk1            TYPE waerk,
          kunnr1            TYPE kunnr,
*          adrnr             TYPE adrnr,
          name1             TYPE ad_name1,
          name2             TYPE ad_name2,
          street            TYPE ad_street,
          str_suppl1        TYPE ad_strspp1,
          city1             TYPE ad_city1,
          post_code1        TYPE ad_pstcd1,
          region            TYPE regio,
          country           TYPE land1,
          kunnr2            TYPE kunnr,
*          adrnr1            TYPE adrnr,
          name11            TYPE ad_name1,
          name21            TYPE ad_name2,
          street1           TYPE ad_street,
          str_suppl11       TYPE ad_strspp1,
          city11            TYPE ad_city1,
          post_code11       TYPE ad_pstcd1,
          region1           TYPE regio,
          country1          TYPE land1,
          wadat_ist         TYPE wadat_ist,
          msglevel          TYPE char7,
          message           TYPE zfedexmsg,
        END OF ty_final,

        BEGIN OF ty_cust,
          sign      TYPE c,
          option(2) TYPE c,
          low(10)   TYPE c,
          high(10)  TYPE c,
         END OF ty_cust.

DATA : gt_fedex_inb  TYPE TABLE OF ty_fedex_inb,
       gt_fedex      TYPE TABLE OF ty_fedex_inb,
       gt_vekp       TYPE TABLE OF ty_vekp,
       gt_likp       TYPE TABLE OF ty_likp,
       gt_vepo       TYPE TABLE OF ty_vepo,
       gt_vbfa       TYPE TABLE OF ty_vbfa,
       gt_vbak       TYPE TABLE OF ty_vbak,
       gt_vbap       TYPE TABLE OF ty_vbap,
       gt_vbpa       TYPE TABLE OF ty_vbpa,
       gt_adrc       TYPE TABLE OF ty_adrc,
       gt_final      TYPE TABLE OF ty_final,
       gt_fcat       TYPE slis_t_fieldcat_alv,
       gt_return     TYPE TABLE OF bapiret2,
       gt_ztuhcd1    TYPE TABLE OF ztuhcd1.

DATA : gi_fedex_inb  TYPE ty_fedex_inb,
       gi_fedex      TYPE ty_fedex_inb,
       gi_vekp       TYPE ty_vekp,
       gi_likp       TYPE ty_likp,
       gi_vepo       TYPE ty_vepo,
       gi_vbfa       TYPE ty_vbfa,
       gi_vbak       TYPE ty_vbak,
       gi_vbap       TYPE ty_vbap,
       gi_vbpa       TYPE ty_vbpa,
       gi_adrc       TYPE ty_adrc,
       gi_final      TYPE ty_final,
       gi_fcat       TYPE slis_fieldcat_alv,
       gi_return     TYPE bapiret2,
       gi_cust       TYPE ty_cust,
       gi_ztuhcd1    TYPE ztuhcd1.

DATA: gw_werks   TYPE werks_d,
      gw_exidv2  TYPE exidv2,
      gw_mexidv2 TYPE exidv2,
      gw_exidv   TYPE exidv,
      gw_custid  TYPE likp-vbeln,"zcustranid,
      gw_styp    TYPE zfdx_servc_type,
      gw_msgl    TYPE char7,
      gw_date    TYPE dats.

CONSTANTS : gc_field1_tx    TYPE slis_fieldname VALUE  'TRACKNUM',
            gc_field2_tx    TYPE slis_fieldname VALUE  'CUSTTRANID',
            gc_field3_tx    TYPE slis_fieldname VALUE  'PLANT',
            gc_field4_tx    TYPE slis_fieldname VALUE  'EXIDV',
            gc_field5_tx    TYPE slis_fieldname VALUE  'MASTERTRACKNUM',
            gc_field6_tx    TYPE slis_fieldname VALUE  'FRTCHARGE',
            gc_field7_tx    TYPE slis_fieldname VALUE  'FRTCURR',
            gc_field8_tx    TYPE slis_fieldname VALUE  'CDATE',
            gc_field9_tx    TYPE slis_fieldname VALUE  'VENUM',
            gc_field10_tx   TYPE slis_fieldname VALUE  'BRGEW',
            gc_field11_tx   TYPE slis_fieldname VALUE  'GEWEI',
            gc_field12_tx   TYPE slis_fieldname VALUE  'VHILM',
            gc_field13_tx   TYPE slis_fieldname VALUE  'VBELN',
            gc_field14_tx   TYPE slis_fieldname VALUE  'POSNR',
            gc_field15_tx   TYPE slis_fieldname VALUE  'MATNR',
            gc_field16_tx   TYPE slis_fieldname VALUE  'VEMNG',
            gc_field17_tx   TYPE slis_fieldname VALUE  'VEMEH',
            gc_field18_tx   TYPE slis_fieldname VALUE  'WERKS',
            gc_field19_tx   TYPE slis_fieldname VALUE  'VBELV',
            gc_field20_tx   TYPE slis_fieldname VALUE  'POSNV',
            gc_field21_tx   TYPE slis_fieldname VALUE  'VBELN1',
            gc_field22_tx   TYPE slis_fieldname VALUE  'KNUMV',
            gc_field23_tx   TYPE slis_fieldname VALUE  'ERDAT',
            gc_field24_tx   TYPE slis_fieldname VALUE  'BSTNK',
            gc_field25_tx   TYPE slis_fieldname VALUE  'BSTDK',
            gc_field26_tx   TYPE slis_fieldname VALUE  'KUNNR',
            gc_field27_tx   TYPE slis_fieldname VALUE  'NETWR',
            gc_field28_tx   TYPE slis_fieldname VALUE  'WAERK',
            gc_field29_tx   TYPE slis_fieldname VALUE  'ARKTX',
            gc_field30_tx   TYPE slis_fieldname VALUE  'KWMENG',
            gc_field31_tx   TYPE slis_fieldname VALUE  'NETWR1',
            gc_field32_tx   TYPE slis_fieldname VALUE  'WAERK1',
            gc_field33_tx   TYPE slis_fieldname VALUE  'KUNNR1',
            gc_field34_tx   TYPE slis_fieldname VALUE  'ADRNR',
            gc_field35_tx   TYPE slis_fieldname VALUE  'NAME1',
            gc_field36_tx   TYPE slis_fieldname VALUE  'NAME2',
            gc_field37_tx   TYPE slis_fieldname VALUE  'STREET',
            gc_field38_tx   TYPE slis_fieldname VALUE  'STR_SUPPL1',
            gc_field39_tx   TYPE slis_fieldname VALUE  'CITY1',
            gc_field40_tx   TYPE slis_fieldname VALUE  'POST_CODE1',
            gc_field41_tx   TYPE slis_fieldname VALUE  'REGION',
            gc_field42_tx   TYPE slis_fieldname VALUE  'COUNTRY',
            gc_field43_tx   TYPE slis_fieldname VALUE  'KUNNR2',
            gc_field44_tx   TYPE slis_fieldname VALUE  'ADRNR1',
            gc_field45_tx   TYPE slis_fieldname VALUE  'NAME11',
            gc_field46_tx   TYPE slis_fieldname VALUE  'NAME21',
            gc_field47_tx   TYPE slis_fieldname VALUE  'STREET1',
            gc_field48_tx   TYPE slis_fieldname VALUE  'STR_SUPPL11',
            gc_field49_tx   TYPE slis_fieldname VALUE  'CITY11',
            gc_field50_tx   TYPE slis_fieldname VALUE  'POST_CODE11',
            gc_field51_tx   TYPE slis_fieldname VALUE  'REGION1',
            gc_field52_tx   TYPE slis_fieldname VALUE  'COUNTRY1',
            gc_field53_tx   TYPE slis_fieldname VALUE  'WADAT_IST'  ,
            gc_field54_tx   TYPE slis_fieldname VALUE  'MSGLEVEL'  ,
            gc_field55_tx   TYPE slis_fieldname VALUE  'MESSAGE'  ,
            gc_c            TYPE c  VALUE 'C',
            gc_name(10)     TYPE c  VALUE 'ZRMM_FEDEX',
            gc_msg(4)       TYPE c  VALUE 'MSG',
            gc_message(7)   TYPE c  VALUE 'MESSAGE'.

